---
layout: post
title: Android Basic
subtitle: Android 진단 시 필요한 정보들 정리
author: g3rm
categories: 
banner:
  image: /assets/images/banners/home.gif
  opacity: 0.618
  background: "#000"
  heading_style: "font-size: 4.25em; font-weight: bold;"
  subheading_style: "color: gold"
tags:
  - example
  - markdown
sidebar:
---
## Android 구조 및 동작이해

![](/assets/images/posts/2025-04-28-Android/cb314902a6b4a42ed8dc26012de1681d_MD5.jpeg)![](/assets/images/posts/2025-04-28-Android/c758f21c8c647ba2e4c36c669faf6173_MD5.jpeg)

## Android 진단 환경 구축
### ADB
SDK 설치 (**Android Studio 설치하면 알아서 깔림**)
- [https://developer.android.com/studio/releases/platform-tools](https://developer.android.com/studio/releases/platform-tools)
- SDK 설치 후 platform-tools 디렉토리 환경 변수 등록

*For Mac*
터미널에서 `code ~/.zshrc` 입력 후 아래와 같이 환경 변수 등록
![](/assets/images/posts/2025-04-28-Android/1f498c0b38fbc453b5b95aeddea2f08b_MD5.jpeg)

### KeyStore
#### Android Studio를 이용해서 생성
[File -> New Project -> Build] 메뉴에서 아래와 같이 진행
![](/assets/images/posts/2025-04-28-Android/a337c77ec1064a83c5bf4b9adc873afd_MD5.jpeg)
#### KeyTool를 이용해서 생성
`keytool -genkey -v -keystore dogyun.keystore -alias dogyun -keyalg RSA -keysize 2048 -validity 10000` 명령어 입력 후 생성
![](/assets/images/posts/2025-04-28-Android/40467f9fd495c037236002f1bfbbb6c6_MD5.jpeg)

### Proxy
#### 낮은 버전의 경우
단순히 127.0.0.1:burp_port 들어가서 인증서 다운로드 후 Astro에서 인증서 설치 진행

#### 높은 버전의 경우
1. Burp Suite [Proxy] - [Options] - [Import/export certificate] 기능을 통해 인증서 파일을 추출
2. `openssl x509 -inform DER -in cacert.cer -out cacert.pem` pem 변환
3. `openssl x509 -inform PEM -subject_hash_old -in cacert.pem` 해쉬값 추출
4. `mv cacert.pem 9a5ba575.0` 파일명 해쉬값으로 변경
5. `adb push 9a5ba575.0 /data/local/tmp`
6. `mount -o rw,remount /` 쓰기권한 마운트 시키기
7. `cp 9a5ba575.0 /system/etc/security/cacerts/`
    1. `ls -l /system/etc/security/cacerts/ | grep 9a5ba575`
8. `mount -o ro,remount /`
9. [설정] - [생체 인식 및 보안] - [기타 보안 설정] - [인증서 확인] 에서 확인

### 정적 분석
#### APK 추출 & 디컴파일
