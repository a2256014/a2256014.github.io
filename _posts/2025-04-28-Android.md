---
layout: post
title: Android Basic
subtitle: Android 진단 시 필요한 정보들 정리
author: g3rm
categories: 
banner:
  image: /assets/images/banners/home.gif
  opacity: 0.618
  background: "#000"
  heading_style: "font-size: 4.25em; font-weight: bold;"
  subheading_style: "color: gold"
tags:
  - example
  - markdown
sidebar:
---
## Android 구조 및 동작이해

![](/assets/images/posts/2025-04-28-Android/cb314902a6b4a42ed8dc26012de1681d_MD5.jpeg)![](/assets/images/posts/2025-04-28-Android/c758f21c8c647ba2e4c36c669faf6173_MD5.jpeg)

## Android 진단 환경 구축
### ADB
SDK 설치 (**Android Studio 설치하면 알아서 깔림**)
- [https://developer.android.com/studio/releases/platform-tools](https://developer.android.com/studio/releases/platform-tools)
- SDK 설치 후 platform-tools 디렉토리 환경 변수 등록

*For Mac*
터미널에서 `code ~/.zshrc` 입력 후 아래와 같이 환경 변수 등록
![](/assets/images/posts/2025-04-28-Android/1f498c0b38fbc453b5b95aeddea2f08b_MD5.jpeg)

### KeyStore
#### Android Studio
[File -> New Project -> Build] 메뉴에서 아래와 같이 진행
![](/assets/images/posts/2025-04-28-Android/a337c77ec1064a83c5bf4b9adc873afd_MD5.jpeg)
#### KeyTool
`keytool -genkey -v -keystore dogyun.keystore -alias dogyun -keyalg RSA -keysize 2048 -validity 10000` 명령어 입력 후 생성
![](/assets/images/posts/2025-04-28-Android/40467f9fd495c037236002f1bfbbb6c6_MD5.jpeg)

### Proxy
#### 낮은 버전의 경우
단순히 127.0.0.1:burp_port 들어가서 인증서 다운로드 후 Astro에서 인증서 설치 진행

#### 높은 버전의 경우
1. Burp Suite [Proxy] - [Options] - [Import/export certificate] 기능을 통해 인증서 파일을 추출
2. `openssl x509 -inform DER -in cacert.cer -out cacert.pem` pem 변환
3. `openssl x509 -inform PEM -subject_hash_old -in cacert.pem` 해쉬값 추출
4. `mv cacert.pem 9a5ba575.0` 파일명 해쉬값으로 변경
5. `adb push 9a5ba575.0 /data/local/tmp`
6. `mount -o rw,remount /` 쓰기권한 마운트 시키기
7. `cp 9a5ba575.0 /system/etc/security/cacerts/`
    1. `ls -l /system/etc/security/cacerts/ | grep 9a5ba575`
8. `mount -o ro,remount /`
9. [설정] - [생체 인식 및 보안] - [기타 보안 설정] - [인증서 확인] 에서 확인

## 정적 분석
### APK 추출
1. ASTRO 백업 기능 이용
![](/assets/images/posts/2025-04-28-Android/f702c56792f7665c4dace347953a8581_MD5.jpeg)
2. 플레이스토어에서 APK 다운로드
![](/assets/images/posts/2025-04-28-Android/e9e8ba9efc283ef7ba597a2d2a60134c_MD5.jpeg)
![](/assets/images/posts/2025-04-28-Android/81f4573e2c8f2bcbaf8eb26a4e623f1c_MD5.jpeg)
3. APK Extractor 이용
![](/assets/images/posts/2025-04-28-Android/6e7784ba8ddf43803323d8d4354055ff_MD5.jpeg)

### 디컴파일
1. jadx
APK 파일 그냥 jadx에 넣으면 됨
2. APK Tool 이용
[https://github.com/iBotPeaches/Apktool/releases/tag/v2.8.0](https://github.com/iBotPeaches/Apktool/releases/tag/v2.8.0)
```shell
java -jar apktool_2.8.0.jar d "디컴파일 할 앱 이름"
```
![](/assets/images/posts/2025-04-28-Android/44089d04f9c58bc20e946e69e368b072_MD5.jpeg)
3. dex2jar 이용
[https://github.com/pxb1988/dex2jar/releases/tag/v2.1](https://github.com/pxb1988/dex2jar/releases/tag/v2.1)
```shell
# Windows의 경우 bat 파일로 돌리면 됨
./d2j-dex2jar.sh apk
```

## 동적 분석
### 메모리 관련
#### fridump
```shell
# string 뽑기
Python3 fridump3.py -u pid -s
```

