---
layout: post
title: Computer Architecture
subtitle: Pwnable & Reversing을 위한 기초 지식
author: g3rm
categories: 
banner:
  image: /assets/images/banners/home.gif
  opacity: 0.618
  background: "#000"
  heading_style: "font-size: 4.25em; font-weight: bold;"
  subheading_style: "color: gold"
tags:
  - Pwnable
  - Reversing
  - Register
  - Architecture
sidebar:
---
> 리버싱, 포너블 전에 알아야 할 기본 지식들을 정리

## Architecture
### 설명
CPU의 내부 구성 요소, 레지스터, 명령어 등을 포함하는 개념   

아키텍처를 알아야 분석 시 어셈블리어 분석 및 POC 작성을 잘 할 수 있다.
그 이유는 비트 별로 레지스터의 명과 크기가 다르며 종류 별로 작동 가능한 OS가 다르기 때문이다.
[*그 외 다양한 이유가 있을 수 있음*]
   
아키텍처의 비트는 ***CPU가 한번에 처리할 수 있는 데이터의 크기***로 ***WORD***라고 부른다.
>x86-64 > WORD > 8byte > 64bit


### 종류
**x86**
- Intel 기반 32bit CPU
- x86은 32bit CPU의 대표명사처럼 불림
- Windows, Linux, Mac OS (BigSur까지) 지원

**x86_64 (amd64)**
- Intel 기반 64bit CPU, x86과 호환됨.
- Windows, Linux, Mac OS (BigSur까지) 지원

**arm**
- RISC(Reduced Instruction Set Computer) 아키텍처
- 저전력 소비, 높은 효율성
- arm 기반 32bit CPU
- x86과 아예 달라서 호환 안 됨.
- Linux, Mac OS (Monterey부 터), Android, iOS

**arm64**
- arm 기반 64bit CPU
- 32bit arm과 호환됨
- Linux, Mac OS (Monterey부터), Android, iOS

## Register
> 여기선 64비트 위주로 정리를 해놓을 예정

x86-64는 x86의 64비트 확장 아키텍처이며 호환이 가능함 [*레지스터의 호환이 가능하다는 것임 -> 32비트 프로그램을 64비트 환경에서 돌리는게 가능하다는 건 아니다. -> 물론 Windows 환경에선 일부분 지원을 해주기 때문에 돌아가긴 하는데 이게 레지스터 호환 때문만이라곤 보기 힘듦*]
![](/assets/images/posts/2025-04-28-CA/7c7082f38646f3ccb51afe82f93edbd1_MD5.jpeg)
### General Register
> 주용도는 있으나, 다양한 용도로 사용될 수 있음.
   
| **이름**                     | **용도**                   |
| -------------------------- | ------------------------ |
| rax (accumulator register) | 함수의 반환 값                 |
| rbx (base register)        | x64에서는 주된 용도 없음          |
| rcx (counter register)     | 반복문의 반복 횟수, 각종 연산의 시행 횟수 |
| rdx (data register)        | x64에서는 주된 용도 없음          |
| rsi (source index)         | 데이터를 옮길 때 원본을 가리키는 포인터   |
| rdi (destination index)    | 데이터를 옮길 때 목적지를 가리키는 포인터  |
| rsp (stack pointer)        | 사용중인 스택의 위치를 가리키는 포인터    |
| rbp (stack base pointer)   | 스택의 바닥을 가리키는 포인터         |
   
### Segment Register
Code, Stack, Data 메모리 영역을 가리킬 때 사용되는 CS, SS, DS 레지스터와 운영체제 별로 용도를 결정할 수 있는 ES, FS, GS 레지스터 
![](/assets/images/posts/2025-04-28-CA/e9df8bbab3a81b286eab30c0b2b15702_MD5.jpeg)

### Flag Register
가장 많이 접할 플래그들은 아래 표와 같음 [다른게 보인다면 추후에 검색해서 찾아볼 것] 
   
| **플래그**           | **의미**                                |
| ----------------- | ------------------------------------- |
| CF(Carry Flag)    | 부호 없는 수의 연산 결과가 비트의 범위를 넘을 경우 설정 됩니다. |
| ZF(Zero Flag)     | 연산의 결과가 0일 경우 설정 됩니다.                 |
| SF(Sign Flag)     | 연산의 결과가 음수일 경우 설정 됩니다.                |
| OF(Overflow Flag) | 부호 있는 수의 연산 결과가 비트 범위를 넘을 경우 설정 됩니다.  |

### Instruction Pointer Register
